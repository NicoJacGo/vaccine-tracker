mutate(mean_cases7=zoo::rollmean(sum_cases,k=7,fill=NA)) %>%
ggplot(aes(x=date1,y=mean_cases7))+geom_line()+theme_bw()+scale_x_date("")+geom_vline(aes(xintercept = as.integer(as.Date("2020-08-24"))), col = "red") + geom_vline(aes(xintercept = as.integer(as.Date("2020-10-27"))), col = "red") + ggtitle("Johnson County")+geom_text(aes(xintercept = as.integer(as.Date("2020-08-24")), label = "\nlol"))
jcD %>% group_by(date1) %>%
summarise(sum_cases=sum(new_confirmed, na.rm=T), .groups="keep")%>%
ungroup() %>%
arrange(date1) %>%
mutate(mean_cases7=zoo::rollmean(sum_cases,k=7,fill=NA)) %>%
ggplot(aes(x=date1,y=mean_cases7))+geom_line()+theme_bw()+scale_x_date("")+geom_vline(aes(xintercept = as.integer(as.Date("2020-08-24"))), col = "red") + geom_vline(aes(xintercept = as.integer(as.Date("2020-10-27"))), col = "red") + ggtitle("Johnson County")+geom_text(aes(xintercept = as.integer(as.Date("2020-08-24")), label = "\nlol", y=20))
jcD %>% group_by(date1) %>%
summarise(sum_cases=sum(new_confirmed, na.rm=T), .groups="keep")%>%
ungroup() %>%
arrange(date1) %>%
mutate(mean_cases7=zoo::rollmean(sum_cases,k=7,fill=NA)) %>%
ggplot(aes(x=date1,y=mean_cases7))+geom_line()+theme_bw()+scale_x_date("")+geom_vline(aes(xintercept = as.integer(as.Date("2020-08-24"))), col = "red") + geom_vline(aes(xintercept = as.integer(as.Date("2020-10-27"))), col = "red") + ggtitle("Johnson County")
defMat<-read.cs("https://raw.githubusercontent.com/ochyzh/POLS478/master/defmat1914.csv" , header=T)
defMat<-read.csv("https://raw.githubusercontent.com/ochyzh/POLS478/master/defmat1914.csv" , header=T)
View(defMat)
View(defMat)
head(defMat)
defMat %>% arrange(name1, name2) %>% pivot_wider(names_from=name2, values_from=ally)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
library(tidyverse)
library(magrittr)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally'
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat<=defMat[,-1]
defMat
defMat<=defMat[,-1]
defMat<=defMat[,-1]
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat<=defMat[,-1]
library(tidyverse)
library(magrittr)
library(tidyverse)
library(magrittr)
defMat<-read.csv("https://raw.githubusercontent.com/ochyzh/POLS478/master/defmat1914.csv" , header=T)
head(defMat)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat<=defMat[,-1]
library(igraph)
install.packages(igraph)
install.packages(igraph)
install.packages("igraph")
library(igraph)
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat), weighted=NULL, mode="directed",diag=FALSE)
plot(mygraph)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat<-defMat[,-1]
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat), weighted=NULL,
mode="directed", diag=FALSE)
delete.vertices(mygraph, which(degree(mygraph)==0))
library(igraph)
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat), weighted=NULL,
mode="directed", diag=FALSE)
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat),
weighted=NULL,mode="directed",
diag=FALSE)
defMat<-defMat[,-1]
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat),
weighted=NULL,mode="directed",
diag=FALSE)
library(tidyverse)
library(magrittr)
defMat<-read.csv("https://raw.githubusercontent.com/ochyzh/POLS478/master/defmat1914.csv" , header=T)
head(defMat)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
defMat<-defMat[,-1]
library(igraph)
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat),
weighted=NULL,mode="directed",
diag=FALSE)
View(defMat)
defMat<-read.csv("https://raw.githubusercontent.com/ochyzh/POLS478/master/defmat1914.csv" , header=T)
head(defMat)
defMat %>% arrange(name1, name2) %>%
pivot_wider(names_from=name2, values_from=ally)
View(defMat)
mygraph<-graph_from_adjacency_matrix(as.matrix(defMat),
weighted=NULL,mode="directed",
diag=FALSE)
install.packages(rvest)
install.packages("rvest")
library(tidyverse)
library(rvest)
library(magrittr)
myurl <- "https://www.imdb.com/title/tt0068646/"
myhtml<-read_html(myurl)
View(myhtml)
View(myhtml)
mycast<-html_nodes(myhtml, "#titleCast")
mycast
mycast<-html_nodes(myhtml, "#titleCast") %>% html_text()
mycast
mycast<-html_nodes(myhtml, "#titleCast") %>% html_table()
mycast<-html_nodes(myhtml, "table") %>% html_table()
mycast
mydat<-mycast %>% extract2(1)
View(mydat)
mydat<-mydat[-1,c(2,4)]
View(mydat)
names(mydat)<-c("Actor", "Role")
View(mydat)
library(stringr)
mydat<-mydat %>% mutate(Role=str_squish(Role))
View(mydat)
library(igraph)
g <- sample_degseq(rep(2,100))
library(igraph)
g <- sample_degseq(rep(2,100))
g
degree(g)
g2 <- sample_degseq(1:10, 10:1)
degree(g2)
g2 <- sample_degseq(6,6,5)
degree(g2)
g2 <- sample_degseq([6,6,5])
g2 <- sample_degseq(6)
degree(g2)
g2 <- sample_degseq(6,1)
g2 <- sample_degseq(6)
degree(g2)
utdegrees <- c(6,6,5,3,2,2,2)
g <- sample_degseq(outdegrees)
outdegrees <- c(6,6,5,3,2,2,2)
g <- sample_degseq(outdegrees)
get.adjacency(g)
g
plot(g)
plot(g)
plot(g)
plot(g)
outdegrees <- c(6,6,6,6,6)
g <- sample_degseq(outdegrees)
plot(g)
outdegrees <- c(6,6,6,6,6,6)
g <- sample_degseq(outdegrees)
plot(g)
get.adjacency(g)
outdegrees <- c(1,0,0,5,0,6,6,4,8,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(6,6,4,8,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(6,6,4,8,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(6,6,4,8,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
g <- sample_degseq(outdegrees)
outdegrees <- c(6,6,6,6,6,6)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(1,2,3,4,5,6)
g <- sample_degseq(outdegrees)
outdegrees <- c(6,6,5,5,4,4,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(100,50,66,48,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
outdegrees <- c(100,50,66,48,3)
g <- sample_degseq(outdegrees)
outdegrees <- c(1,5,6,6,4,8,3)
g <- sample_degseq(outdegrees)
outdegrees <- c(8,6,6,6,4,3,1)
g <- sample_degseq(outdegrees)
get.adjacency(g)
outdegrees <- c(8,6,6,4,3)
g <- sample_degseq(outdegrees)
get.adjacency(g)
outdegrees <- c(8,6,6,4,3)
g <- sample_degseq(outdegrees)
outdegrees <- c(8,6,6,4,3,1)
g <- sample_degseq(outdegrees)
get.adjacency(g)
plot(g)
plot(g)
plot(g)
plot(g)
is_bipartite(g)
is_bipartite(acyclic)
is_acyclic(g)
is_dag(g)
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
setwd("~/")
str(read.csv("^GSPC.csv",sep=",",header = TRUE))
library(rvest)
library(dbplyr)
install.packages("taskscheduleR")
library(taskscheduleR)
library(tidyverse)
library(magrittr)
library(rvest)
content <- read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D")
tables <- content %>% html_table(fill = TRUE)
first_table <- tables[[1]]
View(content)
library(dplyr)
link = "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D"
name = page %>% html_nodes(.integer+ .string , .integer , th:nth-child(3) , .string:nth-child(1) , th:nth-child(1)) %>% html_text()
name = page %>% html_nodes(.integer+ .string , .integer , th~ th+ th , .string:nth-child(1) , th:nth-child(1))
name = page %>% html_nodes(.integer+ .string , .integer)
page = read_html(link)
name = page %>% html_nodes(th:nth-child(4) , .integer+ .string , .integer , th:nth-child(3) , .string:nth-child(1) , th:nth-child(1)) %>% html_text()
name = page %>% html_nodes(tr :nth-child(1)) %>% html_text()
link = "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D"
page = read_html(link)
name = page %>% html_nodes(tr :nth-child(1)) %>% html_text()
View(page)
col_link = "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D"
col_link = "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D"
col_page = read_html(col_link)
col_table = col_page %>% html_nodes("table.datatable") %>% html_table()
View(col_table)
View(col_table)
col_link = "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/Summary/viewData/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?maxrows=200&viz=%7B%22worksheet%22%3A%22Distribution%20Map%22%2C%22dashboard%22%3A%22Vaccine%20Distribution%22%7D"
col_page = read_html(col_link)
col_table = col_page %>% html_nodes("table.datatable") %>% html_table()
col_table = col_page %>% html_nodes("table.datatable") %>% html_table() %>%.[[0]]
col_table = col_page %>% html_nodes("table.datatable") %>% html_table() %>%.[[1]]
View(col_table)
paths_allowed("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
page = read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
page = read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
page = read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
View(page)
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker")
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker")
page = read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
links = page %>% html_nodes(".file-link a") %>% html_attr("href")
download.file(url=links[1], destfile = "data.csv")
page = read_html("https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true")
links = page %>% html_nodes(".file-link a") %>% html_attr("href")
download.file(url=links, destfile = "data.csv")
View(page)
fileurl <- "https://tabexternal.dshs.texas.gov/vizql/t/THD/w/COVID-19VaccineinTexasDashboard/v/VaccineDosesAdministered/vudcsv/sessions/0B07A44BCDF146848A2E92B89F976F14-3:3/views/835363737388761835_14597693307097341076?summary=true"
download.file(fileurl, destfile = "data.csv", method = "curl")
a <- read.csv("data.csv")
View(a)
transformed <- a[1]
View(transformed)
transformed <- a[1,3]
transformed <- a[1:3]
View(transformed)
transformed <- a[1::3]
View(transformed)
transformed <- a[1][3]
1 <- a[1]
p1 <- a[1]
p2 <- a[3]
tranformed <- p2+p1
tranformed <- rbind(p1,p2)
tranformed <- merge(p1,p2)
transformed <- merge(p1,p2)
View(transformed)
View(p2)
transformed <- paste(df$p1, df$p2)
transformed <- paste(p1, p2)
View(tranformed)
p2 <- a[3]
View(p1)
View(p2)
df_transformed = data.frame(p1,p2)
View(df_transformed)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data()), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Data(), "%m/%d/%Y"),
Rexe = file.path(Sys.gentenv("R_HOME"), "bin", "Rscript.exe")
)
source('~/.active-rstudio-document')
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Date(), "%m/%d/%Y"),
Rexe = file.path(Sys.getenv("R_HOME"), "bin", "Rscript.exe")
)
taskcheduler_stop("vaccine_distribution")
("vaccine_distribution")
taskscheduler_stop("vaccine_distribution")
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Date(), "%m/%d/%Y"),
Rexe = file.path(Sys.getenv("R_HOME"), "bin", "Rscript.exe")
)
taskscheduler_create(
taskname = "vaccine_distribution",
rscript = "C:\\Users\\fro7e\\OneDrive\\Desktop\\vaccine-tracker\\vaccine-tracker\\scrape.r",
schedule = "DAILY",
starttime = format(Sys.time() + 62, "%H:%M"),
startdate = format(Sys.Date(), "%m/%d/%Y"),
Rexe = file.path(Sys.getenv("R_HOME"), "bin", "Rscript.exe")
)
View(df_transformed)
View(a)
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker/data")
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker/data")
install.packages("pdftools")
library(tidyverse)
library(pdftools)
pdf_w3 <- pdf_text("~/COVIDVaccineAllocation-Week3")
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker/data")
pdf_w3 <- pdf_text("~/COVIDVaccineAllocation-Week3")
pdf_w3 <- pdf_text("COVIDVaccineAllocation-Week3")
download.file("https://www.dshs.texas.gov/news/updates/COVIDVaccineAllocation-Week3.pdf")
raw_list <- page %>% html
library(stringr)
install.packages("stringr")
page <- read_html("https://www.dshs.texas.gov/coronavirus/immunize/vaccine.aspx")
raw_list <- page %>%
html_nodes("a") %>%
html_attr("href") %>%
str_subset ("\\.pdf") %>%
str_c("https://www.dshs.texas.gov", .) %>%
map(read_html) %>%
map(html_node, "#raw-url") %>%
map(html_attr, "href") %>%
str_c("https://www.dshs.texas.gov", .) %>%
walk2(., basename(.), download.file, mode = "wb")
View(page)
library(tidyverse)
library(rvest)
library(stringr)
library(pdftools)
library(tidyverse)
library(rvest)
library(stringr)
library(pdftools)
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker/data")
library(tidyverse)
library(rvest)
library(stringr)
library(pdftools)
installed.packages("stringr")
iinstalled.packages()
installed.packages()
install.packages("stringr")
install.packages("stringr")
setwd("C:/Users/fro7e/OneDrive/Desktop/vaccine-tracker/vaccine-tracker/data")
library(tidyverse)
library(rvest)
library(stringr)
library(pdftools)
page <- read_html("https://www.dshs.texas.gov/coronavirus/immunize/vaccine.aspx")
raw_list <- page %>%
html_nodes("a") %>%
html_attr("href") %>%
str_subset ("\\.pdf") %>%
str_c("https://www.dshs.texas.gov", .) %>%
map(read_html) %>%
map(html_node, "#raw-url") %>%
map(html_attr, "href") %>%
str_c("https://www.dshs.texas.gov", .) %>%
walk2(., basename(.), download.file, mode = "wb")
raw_list <- page %>% # takes the page above for which we've read the html
html_nodes("a") %>%  # find all links in the page
html_attr("href") %>% # get the url for these links
str_subset("\\.pdf") %>% # find those that end in pdf only
str_c("https://www.dshs.texas.gov", .) %>% # prepend the website to the url
map(read_html) %>% # take previously generated list of urls and read them
map(html_node, "#raw-url") %>% # parse out the 'raw' url - the link for the download button
map(html_attr, "href") %>% # return the set of raw urls for the download buttons
str_c("https://www.dshs.texas.gov", .) %>% # prepend the website again to get a full url
walk2(., basename(.), download.file, mode = "wb") # use purrr to download the pdf associated with each url to the current working directory
raw_list <- page %>%
html_nodes("a") %>%
html_attr("href") %>%
str_subset ("\\.pdf") %>%
str_c("https://www.dshs.texas.gov", .) %>%
map(read_html) %>%
map(html_node, "#raw-url") %>%
map(html_attr, "href") %>%
str_c("https://www.dshs.texas.gov", .) %>%
for (url in raw_list){ download.file(url, destfile = basename(url), mode = "wb") }
page <- read_html("http://www.dshs.texas.gov/coronavirus/immunize/vaccine.aspx")
raw_list <- page %>%
html_nodes("a") %>%
html_attr("href") %>%
str_subset ("\\.pdf") %>%
str_c("http://www.dshs.texas.gov", .) %>%
map(read_html) %>%
map(html_node, "#raw-url") %>%
map(html_attr, "href") %>%
str_c("http://www.dshs.texas.gov", .) %>%
walk2(., basename(.), download.file, mode = "wb")
raw_list <- page
View(raw_list)
raw_list <- page %>% html_nodes("a")
View(raw_list)
raw_list <- page %>% html_nodes("a") %>% html_attr("href")
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf")
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .)
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .) %>%
map(read_html)
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .) %>%
map(read_html) %>% map(html_node, "#raw-url")
View(raw_list)
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .) %>%
map(read_html)
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .) %>%
map(read_html) %>% map(html_node, "#raw-url") %>% map(html_attr, "href")
raw_list <- page %>% html_nodes("a") %>% html_attr("href") %>%
str_subset ("\\.pdf") %>% str_c("http://www.dshs.texas.gov", .) %>%
map(read_html) %>% map(html_node, "#raw-url") %>% map(html_attr, "href") %>%
str_c("http://www.dshs.texas.gov", .)
View(raw_list)
page <- read_html("https://www.github.com/rstudio/cheatsheets")
raw_list <- page %>% # takes the page above for which we've read the html
html_nodes("a") %>%  # find all links in the page
html_attr("href") %>% # get the url for these links
str_subset("\\.pdf") %>% # find those that end in pdf only
str_c("https://www.github.com", .) %>% # prepend the website to the url
map(read_html) %>% # take previously generated list of urls and read them
map(html_node, "#raw-url") %>% # parse out the 'raw' url - the link for the download button
map(html_attr, "href") %>% # return the set of raw urls for the download buttons
str_c("https://www.github.com", .) %>% # prepend the website again to get a full url
walk2(., basename(.), download.file, mode = "wb") # use purrr to download the pdf associated with each url to the current working directory
